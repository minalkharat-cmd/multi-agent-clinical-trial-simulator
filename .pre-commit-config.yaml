# Pre-commit hooks for ClinicalMind
# Install: pre-commit install
# Run manually: pre-commit run --all-files

repos:
  # General hooks
    - repo: https://github.com/pre-commit/pre-commit-hooks
        rev: v4.5.0
            hooks:
                  - id: trailing-whitespace
                        - id: end-of-file-fixer
                              - id: check-yaml
                                    - id: check-json
                                          - id: check-added-large-files
                                                  args: ['--maxkb=1000']
                                                        - id: check-merge-conflict
                                                              - id: detect-private-key
                                                                    - id: check-case-conflict

                                                                      # Python code formatting with Black
                                                                        - repo: https://github.com/psf/black
                                                                            rev: 24.1.1
                                                                                hooks:
                                                                                      - id: black
                                                                                              language_version: python3.11
                                                                                                      args: ['--line-length=88']
                                                                                                      
                                                                                                        # Python linting with Ruff
                                                                                                          - repo: https://github.com/astral-sh/ruff-pre-commit
                                                                                                              rev: v0.1.14
                                                                                                                  hooks:
                                                                                                                        - id: ruff
                                                                                                                                args: ['--fix']
                                                                                                                                
                                                                                                                                  # Type checking with MyPy
                                                                                                                                    - repo: https://github.com/pre-commit/mirrors-mypy
                                                                                                                                        rev: v1.8.0
                                                                                                                                            hooks:
                                                                                                                                                  - id: mypy
                                                                                                                                                          additional_dependencies:
                                                                                                                                                                    - types-requests
                                                                                                                                                                              - pydantic
                                                                                                                                                                                      args: ['--ignore-missing-imports']
                                                                                                                                                                                      
                                                                                                                                                                                        # Security checks with Bandit
                                                                                                                                                                                          - repo: https://github.com/PyCQA/bandit
                                                                                                                                                                                              rev: 1.7.7
                                                                                                                                                                                                  hooks:
                                                                                                                                                                                                        - id: bandit
                                                                                                                                                                                                                args: ['-ll', '-r', 'src/']
                                                                                                                                                                                                                        exclude: tests/
                                                                                                                                                                                                                        
                                                                                                                                                                                                                          # Dockerfile linting
                                                                                                                                                                                                                            - repo: https://github.com/hadolint/hadolint
                                                                                                                                                                                                                                rev: v2.12.0
                                                                                                                                                                                                                                    hooks:
                                                                                                                                                                                                                                          - id: hadolint-docker
                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                          # CI configuration
                                                                                                                                                                                                                                          ci:
                                                                                                                                                                                                                                            autofix_commit_msg: |
                                                                                                                                                                                                                                                [pre-commit.ci] auto fixes from pre-commit hooks
                                                                                                                                                                                                                                                  autofix_prs: true
                                                                                                                                                                                                                                                    autoupdate_branch: 'main'
                                                                                                                                                                                                                                                      autoupdate_commit_msg: '[pre-commit.ci] pre-commit autoupdate'
                                                                                                                                                                                                                                                        autoupdate_schedule: weekly
